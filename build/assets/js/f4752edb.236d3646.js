"use strict";(self.webpackChunksemaphore_docs=self.webpackChunksemaphore_docs||[]).push([[8132],{2798:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>c,default:()=>a,frontMatter:()=>t,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"administration-guide/openid","title":"OpenID","description":"Semaphore supports authentication via OpenID Connect (OIDC).","source":"@site/docs/administration-guide/openid.md","sourceDirName":"administration-guide","slug":"/administration-guide/openid","permalink":"/administration-guide/openid","draft":false,"unlisted":false,"editUrl":"https://github.com/semaphoreui/semaphore-docs/edit/main/docs/administration-guide/openid.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"LDAP configuration","permalink":"/administration-guide/ldap"},"next":{"title":"github","permalink":"/administration-guide/openid/github"}}');var s=n(4848),d=n(8453);const t={},c="OpenID",o={},l=[{value:"Configure via environment variable",id:"configure-via-environment-variable",level:3},{value:"*Claim expression",id:"claim-expression",level:3},{value:"Sign in screen",id:"sign-in-screen",level:2}];function h(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"openid",children:"OpenID"})}),"\n",(0,s.jsx)(i.p,{children:"Semaphore supports authentication via OpenID Connect (OIDC)."}),"\n",(0,s.jsx)(i.p,{children:"Links:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/administration-guide/openid/github",children:"GitHub config"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/administration-guide/openid/google",children:"Google config"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/administration-guide/openid/gitlab",children:"GitLab config"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/administration-guide/openid/authelia",children:"Authelia config"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/administration-guide/openid/authentik",children:"Authentik config"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/administration-guide/openid/keycloak",children:"Keycloak config"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/administration-guide/openid/okta",children:"Okta config"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/administration-guide/openid/azure",children:"Azure config"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"/administration-guide/openid/zitadel",children:"Zitadel config"})}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Example of SSO provider configuration:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-json",children:'{\n  "oidc_providers": {\n    "mysso": {\n      "display_name": "Sign in with MySSO",\n      "color": "orange",\n      "icon": "login",\n      "provider_url": "https://mysso-provider.com",\n      "client_id": "***",\n      "client_secret": "***",\n      "redirect_url": "https://your-domain.com/api/auth/oidc/mysso/redirect"\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(i.h3,{id:"configure-via-environment-variable",children:"Configure via environment variable"}),"\n",(0,s.jsx)(i.p,{children:"When running in containers it may be convenient to configure providers using a single environment variable:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:'SEMAPHORE_OIDC_PROVIDERS=\'{\n  "github": {\n    "client_id": "***",\n    "client_secret": "***"\n  }\n}\'\n'})}),"\n",(0,s.jsxs)(i.p,{children:["This value must be a valid JSON string matching the ",(0,s.jsx)(i.code,{children:"oidc_providers"})," structure above."]}),"\n",(0,s.jsx)(i.p,{children:"All SSO provider options:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Parameter"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"display_name"})}),(0,s.jsx)(i.td,{children:"Provider name which displayed on Login screen."})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"icon"})}),(0,s.jsxs)(i.td,{children:[(0,s.jsx)(i.a,{href:"https://pictogrammers.com/library/mdi/",children:"MDI-icon"})," which displayed before of provider name on Login screen."]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"color"})}),(0,s.jsx)(i.td,{children:"Provider name which displayed on Login screen."})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"client_id"})}),(0,s.jsx)(i.td,{children:"Provider client ID."})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"client_id_file"})}),(0,s.jsxs)(i.td,{children:["The path to the file where the provider's client ID is stored. Has less priorty then ",(0,s.jsx)(i.code,{children:"client_id"}),"."]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"client_secret"})}),(0,s.jsx)(i.td,{children:"Provider client Secret."})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"client_secret_file"})}),(0,s.jsxs)(i.td,{children:["The path to the file where the provider's client secret is stored. Has less priorty then ",(0,s.jsx)(i.code,{children:"client_secret"}),"."]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"redirect_url"})}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"provider_url"})}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"scopes"})}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"username_claim"})}),(0,s.jsxs)(i.td,{children:["Username claim expression",(0,s.jsx)(i.a,{href:"#claim-expression",children:"*"}),"."]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"email_claim"})}),(0,s.jsxs)(i.td,{children:["Email claim expression",(0,s.jsx)(i.a,{href:"#claim-expression",children:"*"}),"."]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"name_claim"})}),(0,s.jsxs)(i.td,{children:["Profile Name claim expression",(0,s.jsx)(i.a,{href:"#claim-expression",children:"*"}),"."]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"order"})}),(0,s.jsx)(i.td,{children:"Position of the provider button on the Sign in screen."})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"endpoint.issuer"})}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"endpoint.auth"})}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"endpoint.token"})}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"endpoint.userinfo"})}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"endpoint.jwks"})}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"endpoint.algorithms"})}),(0,s.jsx)(i.td,{})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"claim-expression",children:"*Claim expression"}),"\n",(0,s.jsx)(i.p,{children:"Example of claim expression:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"email | {{ .username }}@your-domain.com\n"})}),"\n",(0,s.jsx)(i.p,{children:"Semaphore is attempting to claim the email field first. If it is empty, the expression following it is executed."}),"\n",(0,s.jsx)("div",{class:"warning",children:(0,s.jsxs)(i.p,{children:["The expression ",(0,s.jsx)("code",{children:'"username_claim": "|"'})," generates a random ",(0,s.jsx)("code",{children:"username"})," for each user who logs in through the provider."]})}),"\n",(0,s.jsx)(i.h2,{id:"sign-in-screen",children:"Sign in screen"}),"\n",(0,s.jsx)(i.p,{children:"For each of the configured providers, an additional login button is added to the login page:"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:"https://user-images.githubusercontent.com/5564491/232345599-13f744a0-0530-4422-8b55-6a563a4ef5d9.png",alt:'Screenshot of the Semaphore login page, with two login buttons. One says "Sign In", the other says "Sign in with MySSO"'})})]})}function a(e={}){const{wrapper:i}={...(0,d.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>c});var r=n(6540);const s={},d=r.createContext(s);function t(e){const i=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(d.Provider,{value:i},e.children)}}}]);