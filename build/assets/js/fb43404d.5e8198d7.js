"use strict";(self.webpackChunksemaphore_docs=self.webpackChunksemaphore_docs||[]).push([[2200],{7958:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"administration-guide/logs","title":"Logs","description":"Semaphore writes server logs to stdout and stores Task and Activity logs in a database, centralizing key log information and eliminating the need to back up log files separately. The only data stored on the file system is caching data.","source":"@site/docs/administration-guide/logs.md","sourceDirName":"administration-guide","slug":"/administration-guide/logs","permalink":"/administration-guide/logs","draft":false,"unlisted":false,"editUrl":"https://github.com/semaphoreui/semaphore-docs/edit/main/docs/administration-guide/logs.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Runners","permalink":"/administration-guide/runners"},"next":{"title":"Notifications","permalink":"/administration-guide/notifications"}}');var i=s(4848),r=s(8453);const o={},l="Logs",d={},a=[{value:"Server log",id:"server-log",level:2},{value:"Activity log",id:"activity-log",level:2},{value:"Pro version 2.10 and later",id:"pro-version-210-and-later",level:3},{value:"Activity (events) logging options",id:"activity-events-logging-options",level:4},{value:"Tasks logging options",id:"tasks-logging-options",level:4},{value:"Logger options",id:"logger-options",level:4},{value:"Task history",id:"task-history",level:2},{value:"Configuring task retention",id:"configuring-task-retention",level:3},{value:"Syslog protocol support",id:"syslog-protocol-support",level:2},{value:"Syslog options",id:"syslog-options",level:4},{value:"Summary",id:"summary",level:2}];function c(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"logs",children:"Logs"})}),"\n",(0,i.jsxs)(n.p,{children:["Semaphore writes server logs to ",(0,i.jsx)(n.strong,{children:"stdout"})," and stores ",(0,i.jsx)(n.strong,{children:"Task"})," and ",(0,i.jsx)(n.strong,{children:"Activity"})," logs in a ",(0,i.jsx)(n.strong,{children:"database"}),", centralizing key log information and eliminating the need to back up log files separately. The only data stored on the file system is caching data."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"server-log",children:"Server log"}),"\n",(0,i.jsxs)(n.p,{children:["Semaphore does not log to files. Instead, all application logs are written to ",(0,i.jsx)(n.strong,{children:"stdout"}),".",(0,i.jsx)(n.br,{}),"\n","If Semaphore is running as a systemd service, you can view the logs with the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"journalctl -u semaphore.service -f\n"})}),"\n",(0,i.jsx)(n.p,{children:"If Semaphore is running in Docker container, you can view the logs with the following commamd:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"docker logs -f my-semaphore-container\n"})}),"\n",(0,i.jsx)(n.p,{children:"This provides a live (streaming) view of the logs."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"activity-log",children:"Activity log"}),"\n",(0,i.jsx)(n.p,{children:"The Activity Log captures all user actions performed in Semaphore, including:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Adding or removing resources (e.g., Templates, Inventories, Repositories)."}),"\n",(0,i.jsx)(n.li,{children:"Adding or removing team members."}),"\n",(0,i.jsx)(n.li,{children:"Starting or stopping tasks."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"pro-version-210-and-later",children:"Pro version 2.10 and later"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Semaphore Pro"})," 2.10+ supports writing the Activity Log and Task log to a file. To enable this, add the following configuration to your ",(0,i.jsx)(n.code,{children:"config.json"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "log": {\n    "events": {\n      "enabled": true,\n      "logger": {\n        "filename": "./events.log"\n        // other logger options\n      }\n    },\n    "tasks": {\n      "enabled": true,\n      "logger": {\n        "filename": "./tasks.log"\n        // other logger options\n      },\n\t\t\t"result_logger": {\n\t\t\t\t"filename": "./task_results.log"\n        // other logger options\n\t\t\t}\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Or you can do this using following environment variables:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"export SEMAPHORE_EVENT_LOG_ENABLED=True\nexport SEMAPHORE_EVENT_LOG_LOGGER=./events.log\n\nexport SEMAPHORE_TASK_LOG_ENABLED=True\nexport SEMAPHORE_EVENT_LOG_LOGGER=./tasks.log\n"})}),"\n",(0,i.jsx)(n.h4,{id:"activity-events-logging-options",children:"Activity (events) logging options"}),"\n",(0,i.jsx)(n.p,{children:"The Activity (events) logging options allow you to configure how Semaphore records user actions and system events to a file. These settings control the behavior of event logging, including whether it's enabled, the format of log entries, and specific logger configurations. When enabled, all user actions (like creating templates, managing teams, or running tasks) will be written to the specified log file according to these settings."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Environment Variables"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"enabled"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SEMAPHORE_EVENT_LOG_ENABLED"})}),(0,i.jsx)(n.td,{children:"Enable event logging to file."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"format"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SEMAPHORE_EVENT_LOG_FORMAT"})}),(0,i.jsxs)(n.td,{children:["Log record format. Can be ",(0,i.jsx)(n.code,{children:"raw"})," or ",(0,i.jsx)(n.code,{children:"json"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"logger"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SEMAPHORE_EVENT_LOG_LOGGER"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.a,{href:"#logger-options",children:"Logger options"}),"."]})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"tasks-logging-options",children:"Tasks logging options"}),"\n",(0,i.jsx)(n.p,{children:"The Tasks logging options allow you to configure how Semaphore records task execution details to a file. These settings control the logging of task-related events, including task starts, completions, and their execution status. When enabled, all task operations and their outcomes will be written to the specified log file according to these settings, providing a detailed audit trail of task execution history."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Environment Variables"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"enabled"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SEMAPHORE_TASK_LOG_ENABLED"})}),(0,i.jsx)(n.td,{children:"Enable task logging to file."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"format"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SEMAPHORE_TASK_LOG_FORMAT"})}),(0,i.jsxs)(n.td,{children:["Log record format. Can be ",(0,i.jsx)(n.code,{children:"raw"})," or ",(0,i.jsx)(n.code,{children:"json"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"logger"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SEMAPHORE_TASK_LOG_LOGGER"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.a,{href:"#logger-options",children:"Logger options"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"result_logger"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SEMAPHORE_TASK_RESULT_LOGGER"})}),(0,i.jsx)(n.td,{children:"Logger options."})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"logger-options",children:"Logger options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"filename"})}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsxs)(n.td,{children:["Path and name of the file to write logs to. Backup log files will be retained in the same directory.  It uses ",(0,i.jsx)(n.code,{children:"processname"}),"-lumberjack.log in temporary if empty."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"maxsize"})}),(0,i.jsx)(n.td,{children:"Integer"}),(0,i.jsx)(n.td,{children:"The maximum size in megabytes of the log file before it gets rotated. It defaults to 100 megabytes."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"maxage"})}),(0,i.jsx)(n.td,{children:"Integer"}),(0,i.jsx)(n.td,{children:"The maximum number of days to retain old log files based on the timestamp encoded in their filename.  Note that a day is defined as 24 hours and may not exactly correspond to calendar days due to daylight savings, leap seconds, etc. The default is not to remove old log files based on age."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"maxbackups"})}),(0,i.jsx)(n.td,{children:"Integer"}),(0,i.jsx)(n.td,{children:"The maximum number of old log files to retain.  The default is to retain all old log files (though MaxAge may still cause them to get deleted.)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"localtime"})}),(0,i.jsx)(n.td,{children:"Boolean"}),(0,i.jsx)(n.td,{children:"Determines if the time used for formatting the timestamps in backup files is the computer's local time.  The default is to use UTC time."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"compress"})}),(0,i.jsx)(n.td,{children:"Boolean"}),(0,i.jsx)(n.td,{children:"Determines if the rotated log files should be compressed using gzip. The default is not to perform compression."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"Each line in the file follows this format:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"2024-01-03 12:00:34 user=234234 object=template action=delete\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"task-history",children:"Task history"}),"\n",(0,i.jsx)(n.p,{children:"Semaphore stores information about task execution in the database. Task history provides a detailed view of all executed tasks, including their status and logs. You can monitor tasks in real time or review historical logs through the web interface."}),"\n",(0,i.jsx)(n.h3,{id:"configuring-task-retention",children:"Configuring task retention"}),"\n",(0,i.jsx)(n.p,{children:"By default, Semaphore stores all tasks in the database. If you run a large number of tasks, they can occupy a significant amount of disk space."}),"\n",(0,i.jsx)(n.p,{children:"You can configure how many tasks are retained per template using one of the following approaches:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Environment Variable"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"SEMAPHORE_MAX_TASKS_PER_TEMPLATE=30\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"config.json"})," Option"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "max_tasks_per_template": 30\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"When the number of tasks exceeds this limit, the oldest Task Logs are automatically deleted."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"syslog-protocol-support",children:"Syslog protocol support"}),"\n",(0,i.jsx)(n.p,{children:"Semaphore can forward activity and task log entries to an external syslog collector for long\u2011term storage or centralized monitoring. Syslog forwarding is disabled by default."}),"\n",(0,i.jsxs)(n.p,{children:["Configure syslog support in ",(0,i.jsx)(n.code,{children:"config.json"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'"syslog": {\n  "enabled": true,\n  "network": "udp",\n  "address": "logs.example.com:514",\n  "tag": "semaphore"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"The same options are available through environment variables if you prefer not to edit the JSON file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"SEMAPHORE_SYSLOG_ENABLED=true\nSEMAPHORE_SYSLOG_NETWORK=udp\nSEMAPHORE_SYSLOG_ADDRESS=logs.example.com:514\nSEMAPHORE_SYSLOG_TAG=semaphore\n"})}),"\n",(0,i.jsx)(n.h4,{id:"syslog-options",children:"Syslog options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Environment Variables"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"enabled"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SEMAPHORE_SYSLOG_ENABLED"})}),(0,i.jsx)(n.td,{children:"Turn syslog forwarding on or off."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"network"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SEMAPHORE_SYSLOG_NETWORK"})}),(0,i.jsxs)(n.td,{children:["Protocol used to reach the collector, such as ",(0,i.jsx)(n.code,{children:"udp"})," or ",(0,i.jsx)(n.code,{children:"tcp"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"address"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SEMAPHORE_SYSLOG_ADDRESS"})}),(0,i.jsxs)(n.td,{children:["Collector address in ",(0,i.jsx)(n.code,{children:"host:port"})," format."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tag"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SEMAPHORE_SYSLOG_TAG"})}),(0,i.jsx)(n.td,{children:"Optional identifier prepended to every message."})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"Restart the Semaphore service after changing these values so that the new syslog destination is applied."}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Server log:"})," Written to stdout; viewable via ",(0,i.jsx)(n.code,{children:"journalctl"})," if running under systemd."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Activity and tasks log:"})," Tracks all user actions. Optionally, ",(0,i.jsx)(n.strong,{children:"Pro 2.10+"})," can write these to a file."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Task history:"})," Stores real-time and historical task execution logs. Retention is configurable per template."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Following these guidelines ensures you have proper visibility into Semaphore UI operations while controlling storage usage and log retention."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var t=s(6540);const i={},r=t.createContext(i);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);