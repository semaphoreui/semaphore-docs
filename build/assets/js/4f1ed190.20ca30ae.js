"use strict";(self.webpackChunksemaphore_docs=self.webpackChunksemaphore_docs||[]).push([[8685],{3478:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"user-guide/inventory/kerberos","title":"kerberos","description":"User guide","source":"@site/docs/user-guide/inventory/kerberos.md","sourceDirName":"user-guide/inventory","slug":"/user-guide/inventory/kerberos","permalink":"/user-guide/inventory/kerberos","draft":false,"unlisted":false,"editUrl":"https://github.com/semaphoreui/semaphore-docs/edit/main/docs/user-guide/inventory/kerberos.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Inventory","permalink":"/user-guide/inventory"},"next":{"title":"Netbox Dynamic Inventory Integration with Semaphore","permalink":"/user-guide/netbox-dynamic-inventory"}}');var s=i(4848),t=i(8453);const o={},a="Kerberos authentication",l={},d=[{value:"Inventory configuration",id:"inventory-configuration",level:2},{value:"Example Playbook",id:"example-playbook",level:2},{value:"Semaphore UI host requirements",id:"semaphore-ui-host-requirements",level:2},{value:"Notes",id:"notes",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{class:"breadcrumbs",children:(0,s.jsxs)(n.p,{children:["User guide\n\u2192 ",(0,s.jsx)("a",{href:"/user-guide/inventory/",children:"Inventory"}),"\n\u2192 Kerberos"]})}),"\n",(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"kerberos-authentication",children:"Kerberos authentication"})}),"\n",(0,s.jsxs)(n.p,{children:["Semaphore supports Kerberos authentication when running playbooks against ",(0,s.jsx)(n.strong,{children:"Windows hosts via WinRM"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"inventory-configuration",children:"Inventory configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[windows]\nhostname\n\n[windows:vars]\nansible_port=5985\nansible_connection=winrm\nansible_winrm_server_cert_validation=ignore\nansible_winrm_transport=ntlm\nansible_winrm_kinit_mode=managed\nansible_winrm_scheme=http\n"})}),"\n",(0,s.jsx)(n.p,{children:"Also make sure:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A username and password are provided (Semaphore credentials)"}),"\n",(0,s.jsxs)(n.li,{children:["The user format is ",(0,s.jsx)(n.code,{children:"domain\\\\username"})," (e.g., ",(0,s.jsx)(n.code,{children:"CORP\\\\admin"}),") if needed"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The key setting is:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"ansible_winrm_kinit_mode=managed\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This tells Ansible to ",(0,s.jsx)(n.strong,{children:"automatically acquire a Kerberos ticket"})," using the provided username/password without requiring you to manually run kinit."]}),"\n",(0,s.jsx)(n.h2,{id:"example-playbook",children:"Example Playbook"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"- hosts: all\n  gather_facts: false\n\n  tasks:\n    - win_ping:\n"})}),"\n",(0,s.jsx)(n.p,{children:"This verifies basic connectivity using WinRM + Kerberos."}),"\n",(0,s.jsx)(n.h2,{id:"semaphore-ui-host-requirements",children:"Semaphore UI host requirements"}),"\n",(0,s.jsx)(n.p,{children:"On the Semaphore host, install the following packages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install libkrb5-dev krb5-user\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Then edit ",(0,s.jsx)(n.code,{children:"/etc/krb5.conf"})," and set your default realm (domain name):"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[libdefaults]\n  default_realm = YOUR.DOMAIN.NAME\n"})}),"\n",(0,s.jsx)(n.p,{children:"This must match your Active Directory domain."}),"\n",(0,s.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["You do not need to run kinit manually \u2014 Ansible handles ticket acquisition when ",(0,s.jsx)(n.code,{children:"ansible_winrm_kinit_mode=managed"})," is set."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Works with the default NTLM transport (no SSL needed if using HTTP and ",(0,s.jsx)(n.code,{children:"cert_validation=ignore"}),")."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var r=i(6540);const s={},t=r.createContext(s);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);