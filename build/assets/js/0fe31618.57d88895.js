"use strict";(self.webpackChunksemaphore_docs=self.webpackChunksemaphore_docs||[]).push([[4907],{453:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"user-guide/schedules","title":"Schedules","description":"The schedule function in Semaphore allows to automate the execution of templates (e.g. playbook runs) at predefined intervals. This feature allows to implement routine automation tasks, such as regular backups, compliance checks, system updates, and more.","source":"@site/docs/user-guide/schedules.md","sourceDirName":"user-guide","slug":"/user-guide/schedules","permalink":"/user-guide/schedules","draft":false,"unlisted":false,"editUrl":"https://github.com/semaphoreui/semaphore-docs/edit/main/docs/user-guide/schedules.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Tasks","permalink":"/user-guide/tasks"},"next":{"title":"Key Store","permalink":"/user-guide/key-store"}}');var i=s(4848),r=s(8453);const a={},c="Schedules",o={},l=[{value:"Setup and configuration",id:"setup-and-configuration",level:2},{value:"Timezone configuration",id:"timezone-configuration",level:2},{value:"Accessing the schedule feature",id:"accessing-the-schedule-feature",level:3},{value:"Creating a new schedule",id:"creating-a-new-schedule",level:3},{value:"Cron format syntax",id:"cron-format-syntax",level:3},{value:"Use cases",id:"use-cases",level:2},{value:"System maintenance",id:"system-maintenance",level:3},{value:"Backup operations",id:"backup-operations",level:3},{value:"Compliance checks",id:"compliance-checks",level:3},{value:"Environment provisioning and cleanup",id:"environment-provisioning-and-cleanup",level:3},{value:"Best practices",id:"best-practices",level:2},{value:"Task parameters",id:"task-parameters",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"schedules",children:"Schedules"})}),"\n",(0,i.jsx)(n.p,{children:"The schedule function in Semaphore allows to automate the execution of templates (e.g. playbook runs) at predefined intervals. This feature allows to implement routine automation tasks, such as regular backups, compliance checks, system updates, and more."}),"\n",(0,i.jsx)(n.p,{children:"Make sure to restart the Semaphore service after making changes for them to take effect."}),"\n",(0,i.jsx)(n.h2,{id:"setup-and-configuration",children:"Setup and configuration"}),"\n",(0,i.jsx)(n.h2,{id:"timezone-configuration",children:"Timezone configuration"}),"\n",(0,i.jsx)(n.p,{children:"By default, the schedule feature operates in the UTC timezone. However, this can be customized to match your local timezone or specific requirements."}),"\n",(0,i.jsx)(n.p,{children:"You can change the timezone by updating the configuration file or setting an environment variable:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Using the configuration file"}),":",(0,i.jsx)(n.br,{}),"\n","Add or update the ",(0,i.jsx)(n.code,{children:"timezone"})," field in your Semaphore configuration file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "schedule": {\n    "timezone": "America/New_York"\n  }\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Using an environment variable"}),":",(0,i.jsx)(n.br,{}),"\n","Set the ",(0,i.jsx)(n.code,{children:"SEMAPHORE_SCHEDULE_TIMEZONE"})," environment variable:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'export SEMAPHORE_SCHEDULE_TIMEZONE="America/New_York"\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For a list of valid timezone values, refer to the ",(0,i.jsx)(n.a,{href:"https://www.iana.org/time-zones",children:"IANA Time Zone Database"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"accessing-the-schedule-feature",children:"Accessing the schedule feature"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Log in to your Ansible Semaphore web interface"}),"\n",(0,i.jsx)(n.li,{children:'Navigate to the "Schedule" tab in the main navigation menu'}),"\n",(0,i.jsx)(n.li,{children:'Click the "New Schedule" button in the top right corner to create a new schedule'}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-new-schedule",children:"Creating a new schedule"}),"\n",(0,i.jsx)(n.p,{children:"When creating a new schedule, you'll need to configure the following options:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Name"}),(0,i.jsx)(n.td,{children:"A descriptive name for the scheduled task"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Template"}),(0,i.jsx)(n.td,{children:"The specific Task Template to execute"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Timing"}),(0,i.jsx)(n.td,{children:"Either in cron format for more fexibility or using the built-in options for common intervals"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"cron-format-syntax",children:"Cron format syntax"}),"\n",(0,i.jsx)(n.p,{children:"The schedule uses standard cron syntax with five fields:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500 minute (0-59)\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500 hour (0-23)\n\u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500 day of month (1-31)\n\u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500 month (1-12)\n\u2502 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500 day of week (0-6) (Sunday=0)\n\u2502 \u2502 \u2502 \u2502 \u2502\n\u2502 \u2502 \u2502 \u2502 \u2502\n* * * * *\n"})}),"\n",(0,i.jsx)(n.p,{children:"Examples:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"*/15 * * * *"})," - Run every 15 minutes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"0 2 * * *"})," - Run at 2:00 AM every day"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"0 0 * * 0"})," - Run at midnight on Sundays"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"0 9 1 * *"})," - Run at 9:00 AM on the first day of every month"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Very helpful cron expression generator: ",(0,i.jsx)(n.a,{href:"https://crontab.guru/",children:"https://crontab.guru/"})]}),"\n",(0,i.jsx)(n.h2,{id:"use-cases",children:"Use cases"}),"\n",(0,i.jsx)(n.h3,{id:"system-maintenance",children:"System maintenance"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# Example playbook for system updates\n---\n- hosts: all\n  become: yes\n  tasks:\n    - name: Update apt cache\n      apt:\n        update_cache: yes\n\n    - name: Upgrade all packages\n      apt:\n        upgrade: yes\n\n    - name: Remove dependencies that are no longer required\n      apt:\n        autoremove: yes\n"})}),"\n",(0,i.jsx)(n.p,{children:"Schedule this playbook to run weekly during off-hours to ensure systems stay up-to-date."}),"\n",(0,i.jsx)(n.h3,{id:"backup-operations",children:"Backup operations"}),"\n",(0,i.jsx)(n.p,{children:"Create schedules for database backups with different frequencies:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Daily backups that retain for one week"}),"\n",(0,i.jsx)(n.li,{children:"Weekly backups that retain for one month"}),"\n",(0,i.jsx)(n.li,{children:"Monthly backups that retain for one year"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"compliance-checks",children:"Compliance checks"}),"\n",(0,i.jsx)(n.p,{children:"Schedule regular compliance scans to ensure systems meet security requirements:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# Example compliance check playbook\n---\n- hosts: all\n  tasks:\n    - name: Run compliance checks\n      script: /path/to/compliance_script.sh\n\n    - name: Collect compliance reports\n      fetch:\n        src: /var/log/compliance-report.log\n        dest: reports/{{ inventory_hostname }}/\n        flat: yes\n"})}),"\n",(0,i.jsx)(n.h3,{id:"environment-provisioning-and-cleanup",children:"Environment provisioning and cleanup"}),"\n",(0,i.jsx)(n.p,{children:"For development or testing environments. Schedule cloud environment creation in the morning and teardown in the evening to optimize costs."}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best practices"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Use descriptive names for schedules that indicate both function and timing (e.g. "Weekly-Backup-Sunday-2AM")'}),"\n",(0,i.jsx)(n.li,{children:"Avoid scheduling too many resource-intensive tasks concurrently"}),"\n",(0,i.jsx)(n.li,{children:"Consider the effect of long-running scheduled tasks on other schedules"}),"\n",(0,i.jsx)(n.li,{children:"Test schedules with short intervals before setting up production schedules with longer intervals"}),"\n",(0,i.jsx)(n.li,{children:"Document the purpose and expected outcomes of scheduled tasks"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"task-parameters",children:"Task parameters"}),"\n",(0,i.jsx)(n.p,{children:"Schedules can pass parameters to tasks. Enable prompts for the required fields in the template, then define parameter values in the schedule configuration so each run supplies the desired overrides (for example branch, variables, flags)."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var t=s(6540);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);