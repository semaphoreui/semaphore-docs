"use strict";(self.webpackChunksemaphore_docs=self.webpackChunksemaphore_docs||[]).push([[9434],{753:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"administration-guide/cli/migrations","title":"migrations","description":"CLI","source":"@site/docs/administration-guide/cli/migrations.md","sourceDirName":"administration-guide/cli","slug":"/administration-guide/cli/migrations","permalink":"/administration-guide/cli/migrations","draft":false,"unlisted":false,"editUrl":"https://github.com/semaphoreui/semaphore-docs/edit/main/docs/administration-guide/cli/migrations.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"runners","permalink":"/administration-guide/cli/runners"},"next":{"title":"LDAP configuration","permalink":"/administration-guide/ldap"}}');var s=n(4848),o=n(8453);const a={},t="Database Migrations",l={},d=[{value:"Getting Help",id:"getting-help",level:2},{value:"Applying Migrations",id:"applying-migrations",level:2},{value:"Apply All Pending Migrations",id:"apply-all-pending-migrations",level:3},{value:"Apply Migrations Up to a Specific Version",id:"apply-migrations-up-to-a-specific-version",level:3},{value:"Rolling Back Migrations",id:"rolling-back-migrations",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function c(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{class:"breadcrumbs",children:(0,s.jsxs)(i.p,{children:[(0,s.jsx)("a",{href:"/administration-guide/runners",children:"CLI"}),"\n\u2192 Database migrations"]})}),"\n",(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"database-migrations",children:"Database Migrations"})}),"\n",(0,s.jsx)(i.p,{children:"Database migrations allow you to update or roll back your Semaphore database schema to match the requirements of different Semaphore versions. This is essential for upgrades, downgrades, and maintaining compatibility."}),"\n",(0,s.jsx)(i.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,s.jsx)(i.p,{children:"To see all available migration commands and options, run:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"semaphore migrations --help\n"})}),"\n",(0,s.jsx)(i.h2,{id:"applying-migrations",children:"Applying Migrations"}),"\n",(0,s.jsx)(i.h3,{id:"apply-all-pending-migrations",children:"Apply All Pending Migrations"}),"\n",(0,s.jsx)(i.p,{children:"To apply all available migrations and bring your database up to date:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"semaphore migrate\n"})}),"\n",(0,s.jsx)(i.h3,{id:"apply-migrations-up-to-a-specific-version",children:"Apply Migrations Up to a Specific Version"}),"\n",(0,s.jsx)(i.p,{children:"To migrate your database schema up to a specific version, use:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"semaphore migrate --apply-to <version>\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"<version>"}),": The target migration version (e.g., ",(0,s.jsx)(i.code,{children:"2.15"})," or ",(0,s.jsx)(i.code,{children:"2.14.4"}),")."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Example:"})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"semaphore migrate --apply-to 2.15.1\n"})}),"\n",(0,s.jsx)(i.h2,{id:"rolling-back-migrations",children:"Rolling Back Migrations"}),"\n",(0,s.jsx)(i.p,{children:"To undo migrations and roll back your database schema to a previous version:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"semaphore migrate --undo-to <version>\n"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"<version>"}),": The migration version you want to roll back to (e.g., ",(0,s.jsx)(i.code,{children:"2.13"})," or ",(0,s.jsx)(i.code,{children:"2.14.4"}),")."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Example:"})}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"semaphore migrate --undo-to 2.13\n"})}),"\n",(0,s.jsx)(i.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Always back up your database before applying or rolling back migrations."}),"\n",(0,s.jsx)(i.li,{children:"If you encounter errors, check the logs for details and ensure your CLI version matches your Semaphore server version."}),"\n"]})]})}function p(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>t});var r=n(6540);const s={},o=r.createContext(s);function a(e){const i=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(o.Provider,{value:i},e.children)}}}]);