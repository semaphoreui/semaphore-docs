"use strict";(self.webpackChunksemaphore_docs=self.webpackChunksemaphore_docs||[]).push([[1122],{1507:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"user-guide/environment","title":"Variable Groups","description":"The Variable Groups section of Semaphore is a place to store additional variables for an inventory and must be stored in JSON format.","source":"@site/docs/user-guide/environment.md","sourceDirName":"user-guide","slug":"/user-guide/environment","permalink":"/user-guide/environment","draft":false,"unlisted":false,"editUrl":"https://github.com/semaphoreui/semaphore-docs/edit/main/docs/user-guide/environment.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Netbox Dynamic Inventory Integration with Semaphore","permalink":"/user-guide/netbox-dynamic-inventory"},"next":{"title":"Repositories","permalink":"/user-guide/repositories"}}');var o=n(4848),a=n(8453);const t={},s="Variable Groups",l={},d=[{value:"Create a variable group",id:"create-a-variable-group",level:2},{value:"Updating a variable group",id:"updating-a-variable-group",level:2},{value:"Deleting the variable group",id:"deleting-the-variable-group",level:2},{value:"Using Variable Groups - Terraform/OpenTofu",id:"using-variable-groups---terraformopentofu",level:2}];function c(e){const r={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"variable-groups",children:"Variable Groups"})}),"\n",(0,o.jsx)(r.p,{children:"The Variable Groups section of Semaphore is a place to store additional variables for an inventory and must be stored in JSON format."}),"\n",(0,o.jsx)(r.p,{children:"All task templates require a variable group to be defined even if it is empty."}),"\n",(0,o.jsx)(r.h2,{id:"create-a-variable-group",children:"Create a variable group"}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsx)(r.li,{children:"Click on the Variable Group tab."}),"\n",(0,o.jsx)(r.li,{children:"Click on the New Variable Group button."}),"\n",(0,o.jsxs)(r.li,{children:["Name the Variable Group and type or paste in valid JSON variables. If you just need an empty Variable Group type in ",(0,o.jsx)(r.code,{children:"{}"}),"."]}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"updating-a-variable-group",children:"Updating a variable group"}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsx)(r.li,{children:"Click on the Variable Groups tab."}),"\n",(0,o.jsx)(r.li,{children:"Click the pencil icon."}),"\n",(0,o.jsx)(r.li,{children:"Make changes and click save."}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"deleting-the-variable-group",children:"Deleting the variable group"}),"\n",(0,o.jsx)(r.p,{children:"Before you remove a variable proup, you must remove all resources tied to it.\nIf you are not sure which resources are being used in a variable group, follow steps 1 and 2 below. It will show you which resources are being used, with links to those resources."}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsx)(r.li,{children:"Click on the Variable Group."}),"\n",(0,o.jsx)(r.li,{children:"Click the trash can icon next to the Variable Group."}),"\n",(0,o.jsx)(r.li,{children:"Click Yes if you are sure you want to remove the variable group."}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"using-variable-groups---terraformopentofu",children:"Using Variable Groups - Terraform/OpenTofu"}),"\n",(0,o.jsxs)(r.p,{children:["When you want utilize a stored variable group variable or secret in your terraform template you must prefix the name with ",(0,o.jsx)(r.code,{children:"TF_VAR_"})," for the terraform script to use it."]}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.strong,{children:"Example"}),"\nPassing Hetzner Cloud API key to OpenTofu/Terraform playbook."]}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsx)(r.li,{children:"Click on Variable Group"}),"\n",(0,o.jsxs)(r.li,{children:["Click ",(0,o.jsx)(r.code,{children:"New Group"})]}),"\n",(0,o.jsxs)(r.li,{children:["Click on ",(0,o.jsx)(r.code,{children:"Secrets"})," tab"]}),"\n",(0,o.jsxs)(r.li,{children:["Add ",(0,o.jsx)(r.code,{children:"TF_VAR_hcloud_token"})," and add you ",(0,o.jsx)(r.code,{children:"secret"})," in the hidden field"]}),"\n",(0,o.jsx)(r.li,{children:"Click Save"}),"\n"]}),"\n",(0,o.jsxs)(r.p,{children:["We will call our secret ",(0,o.jsx)(r.code,{children:"TF_VAR_hcloud_token"})," as ",(0,o.jsx)(r.code,{children:"var.hcloud_token"})," in\nhetzner.tf"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:'terraform {\n  required_providers {\n    hcloud = {\n      source  = "hetznercloud/hcloud"\n      version = "~> 1.45"\n    }\n  }\n}\n\n# Declare the variable\nvariable "hcloud_token" {\n  type        = string\n  description = "Hetzner Cloud API token"\n  sensitive   = true  # This prevents the token from being displayed in logs\n}\n\nprovider "hcloud" {\n  token = var.hcloud_token\n}\n\n# Create a new server running debian\nresource "hcloud_server" "webserver" {\n  name        = "webserver"\n  image       = "ubuntu-24.04"\n  server_type = "cpx11" \n  location    = "ash"\n  ssh_keys = [ "mysshkey" ]\n  public_net {\n    ipv4_enabled = true\n    ipv6_enabled = true\n  }\n}\n'})})]})}function u(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>s});var i=n(6540);const o={},a=i.createContext(o);function t(e){const r=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(a.Provider,{value:r},e.children)}}}]);