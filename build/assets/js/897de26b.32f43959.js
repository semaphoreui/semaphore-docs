"use strict";(self.webpackChunksemaphore_docs=self.webpackChunksemaphore_docs||[]).push([[9134],{4142:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>t,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"user-guide/repositories","title":"Repositories","description":"A Repository is a place to store and manage Ansible content like playbooks and roles.","source":"@site/docs/user-guide/repositories.md","sourceDirName":"user-guide","slug":"/user-guide/repositories","permalink":"/user-guide/repositories","draft":false,"unlisted":false,"editUrl":"https://github.com/semaphoreui/semaphore-docs/edit/main/docs/user-guide/repositories.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Variable Groups","permalink":"/user-guide/environment"},"next":{"title":"bitbucket_access_token","permalink":"/user-guide/repositories/bitbucket_access_token"}}');var o=s(4848),r=s(8453);const t={},l="Repositories",c={},d=[{value:"Authentication",id:"authentication",level:2},{value:"Creating a New Repository",id:"creating-a-new-repository",level:2},{value:"Editing an Existing Repository",id:"editing-an-existing-repository",level:2},{value:"Deleting a Repository",id:"deleting-a-repository",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Roles",id:"roles",level:3},{value:"Collection",id:"collection",level:3},{value:"Processing Logic",id:"processing-logic",level:3}];function h(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"repositories",children:"Repositories"})}),"\n",(0,o.jsx)(i.p,{children:"A Repository is a place to store and manage Ansible content like playbooks and roles."}),"\n",(0,o.jsx)(i.p,{children:"Semaphore understands Repositories that are:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["a local file system (",(0,o.jsx)(i.code,{children:"/path/to/the/repo"}),")"]}),"\n",(0,o.jsxs)(i.li,{children:["a local Git repository (",(0,o.jsx)(i.code,{children:"file://"}),")"]}),"\n",(0,o.jsxs)(i.li,{children:["a remote Git Repository that is accessed over HTTPS (",(0,o.jsx)(i.code,{children:"https://"}),"), SSH(",(0,o.jsx)(i.code,{children:"ssh://"}),")"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"git://"})," protocol supported, but it is not recommended for security reasons."]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"All Task Templates require a Repository in order to run."}),"\n",(0,o.jsx)(i.h2,{id:"authentication",children:"Authentication"}),"\n",(0,o.jsxs)(i.p,{children:["If you are using a remote Repository that requires authentication, you will need to configure a key in the ",(0,o.jsx)(i.strong,{children:"Key Store"})," section of Semaphore."]}),"\n",(0,o.jsxs)(i.p,{children:["For remote Repositories that use SSH, you will need to use your SSH key in the ",(0,o.jsx)(i.strong,{children:"Key Store"}),"."]}),"\n",(0,o.jsxs)(i.p,{children:["For Remote Repositories that do not have authentication, you can create a Key with the type of ",(0,o.jsx)(i.code,{children:"None"}),"."]}),"\n",(0,o.jsx)(i.h2,{id:"creating-a-new-repository",children:"Creating a New Repository"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Make sure you have configured the key for the Repository you are about to add in the key store section."}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsxs)(i.p,{children:["Go to the Repositories section of Semaphore, click the ",(0,o.jsx)(i.strong,{children:"New Repository"})," button in the upper right hand corner."]}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Configure the Repository:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Name Repository"}),"\n",(0,o.jsxs)(i.li,{children:["Add the URL. The URL must start with the following:","\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"/path/to/the/repo"})," for a local folder on the file system"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"https://"})," for a remote Git Repository accessed over HTTPS"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"ssh://"})," for a remote Git Repository accessed over SSH"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"file://"})," for a local Git Repository"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"git://"})," for a remote Git Repository accessed over Git protocol"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.li,{children:"Set the branch of the Repository, if you are not sure what it should be, it is probably master or main"}),"\n",(0,o.jsxs)(i.li,{children:["Select the ",(0,o.jsx)(i.strong,{children:"Access Key"})," you configured prior to setting up this Repository."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Click Save once everything is configured."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"editing-an-existing-repository",children:"Editing an Existing Repository"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Go to the Repositories section of Semaphore."}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Click on the pencil icon next to the Repository you wish to change, then you will be presented with the Repository configuration."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"deleting-a-repository",children:"Deleting a Repository"}),"\n",(0,o.jsx)(i.p,{children:"Make sure the Repository that is about to be delete is not in use by any Task Templates.\nA Repository cannot be deleted if it is used in any Task Templates:"}),"\n",(0,o.jsxs)(i.ol,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Go to the Repositories section of Semaphore."}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Click on the trash can icon on of the Repository you wish to delete."}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Click Yes on the confirmation pop-up if you are sure you want this Repository to be deleted."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"requirements",children:"Requirements"}),"\n",(0,o.jsx)(i.p,{children:"Upon project initialization Semaphore searches for and installs Ansible roles and collections from requirements.yml in the following locations and order."}),"\n",(0,o.jsx)(i.h3,{id:"roles",children:"Roles"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"playbook_dir"}),"/roles/requirements.yml"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"playbook_dir"}),"/requirements.yml"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"repo_path"}),"/roles/requirements.yml"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"repo_path"}),"/requirements.yml"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"collection",children:"Collection"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"playbook_dir"}),"/collections/requirements.yml"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"playbook_dir"}),"/requirements.yml"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"repo_path"}),"/collections/requirements.yml"]}),"\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"repo_path"}),"/requirements.yml"]}),"\n"]}),"\n",(0,o.jsx)(i.h3,{id:"processing-logic",children:"Processing Logic"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Each file is processed independently"}),"\n",(0,o.jsx)(i.li,{children:"If a file exists, it will be processed according to its type (role or collection)"}),"\n",(0,o.jsx)(i.li,{children:"If any file processing results in an error, the installation process stops and returns the error"}),"\n",(0,o.jsxs)(i.li,{children:["The same requirements.yml file in the root directories (",(0,o.jsxs)(i.strong,{children:[(0,o.jsx)(i.code,{children:"playbook_dir"}),"/requirements.yml"]})," and ",(0,o.jsxs)(i.strong,{children:[(0,o.jsx)(i.code,{children:"repo_path"}),"/requirements.yml"]}),") is processed twice - once for roles and once for collections"]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"Semaphore will attempt to process all these locations regardless of whether previous locations were found or successfully processed, except in the case of errors."})]})}function a(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},8453:(e,i,s)=>{s.d(i,{R:()=>t,x:()=>l});var n=s(6540);const o={},r=n.createContext(o);function t(e){const i=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),n.createElement(r.Provider,{value:i},e.children)}}}]);